#!/usr/bin/env python

import os
import sys
import django
import optparse

from django.core.management import call_command


if __name__ == '__main__':
    parser = optparse.OptionParser()
    parser.add_option('--update', action="store_true", default=False)
    options, arguments = parser.parse_args()

    footyhints_path = os.path.join(os.path.dirname(__file__), "../")
    sys.path.insert(0, footyhints_path)

    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'footyhints.settings')
    django.setup()

    if not options.update:
        call_command("flush", "--no-input")
        call_command("migrate", "--no-input")

    call_command("setupdb", update=options.update)
